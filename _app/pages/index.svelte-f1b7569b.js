import{S as ra,i as ia,s as ca,e as r,t as f,c as i,a as c,g as u,d as o,f as F,E as e,I as bt,b as w,J as Wl,K as xl,L as ke,M as Jl,N as da,k as g,n as b,O as rt,j as Oe,P as ha,m as Me,Q as xe,R as fa,o as je,T as ua,h as Le,x as Pe,u as He,v as Ae,U as Gl,V as pa,A as _a,z as ma,W as va,X as ga,Y as ba,Z as wa,_ as ya}from"../chunks/vendor-4a630360.js";import{B as it}from"../chunks/Blanchor-9aa4d670.js";var Ea="/tfjs-test/_app/assets/beach-1cce24f1.jpg",Sa="/tfjs-test/_app/assets/dogs-7a39fd04.jpg",Yl="/tfjs-test/_app/assets/food-fa9167d1.jpeg",$a="/tfjs-test/_app/assets/kittens-6dbc1477.jpeg",ka="/tfjs-test/_app/assets/pizza-18309d1d.jpeg";const{document:ql}=va;function Ql(n,t,l){const a=n.slice();return a[36]=t[l],a}function Xl(n,t,l){const a=n.slice();return a[39]=t[l],a}function Kl(n,t,l){const a=n.slice();return a[42]=t[l],a[44]=l,a}function Zl(n,t,l){const a=n.slice();return a[45]=t[l],a[44]=l,a}function ea(n,t,l){const a=n.slice();return a[47]=t[l],a}function Ia(n){let t,l;return t=new Jl({props:{class:"icon-button",icon:ga,style:"color:white;"}}),{c(){Oe(t.$$.fragment)},l(a){Me(t.$$.fragment,a)},m(a,h){je(t,a,h),l=!0},p:bt,i(a){l||(Pe(t.$$.fragment,a),l=!0)},o(a){He(t.$$.fragment,a),l=!1},d(a){Ae(t,a)}}}function ta(n){let t,l=n[47].display+"",a,h;return{c(){t=r("option"),a=f(l),this.h()},l(d){t=i(d,"OPTION",{});var p=c(t);a=u(p,l),p.forEach(o),this.h()},h(){t.__value=h=n[47].value,t.value=t.__value},m(d,p){F(d,t,p),e(t,a)},p:bt,d(d){d&&o(t)}}}function la(n){let t,l,a,h,d;function p(){return n[17](n[44])}return{c(){t=r("img"),this.h()},l(m){t=i(m,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){w(t,"alt","analyze option"),w(t,"class",l=""+(Wl(`image-option ${n[8]===n[44]?"focused":""}`)+" svelte-10g5ip5")),xl(t.src,a=n[45])||w(t,"src",a)},m(m,v){F(m,t,v),h||(d=ke(t,"click",p),h=!0)},p(m,v){n=m,v[0]&256&&l!==(l=""+(Wl(`image-option ${n[8]===n[44]?"focused":""}`)+" svelte-10g5ip5"))&&w(t,"class",l),v[0]&8&&!xl(t.src,a=n[45])&&w(t,"src",a)},d(m){m&&o(t),h=!1,d()}}}function Da(n){let t,l,a;return{c(){t=r("div"),l=r("b"),a=f("The model did not detect any objects")},l(h){t=i(h,"DIV",{});var d=c(t);l=i(d,"B",{});var p=c(l);a=u(p,"The model did not detect any objects"),p.forEach(o),d.forEach(o)},m(h,d){F(h,t,d),e(t,l),e(l,a)},p:bt,d(h){h&&o(t)}}}function Ta(n){let t,l,a,h,d,p,m,v,M,H,q,U,B,j,A,V,$,L,P,R,se,z,N,Z,O=n[6],T=[];for(let C=0;C<O.length;C+=1)T[C]=aa(Kl(n,O,C));return{c(){t=r("table"),l=r("thead"),a=r("tr"),h=r("th"),d=f("Class"),p=g(),m=r("th"),v=f("Confidence"),M=g(),H=r("th"),q=f("Top Left X px"),U=g(),B=r("th"),j=f("Top Left Y px"),A=g(),V=r("th"),$=f("Width px"),L=g(),P=r("th"),R=f("Height px"),se=g(),z=r("tbody");for(let C=0;C<T.length;C+=1)T[C].c();this.h()},l(C){t=i(C,"TABLE",{class:!0});var x=c(t);l=i(x,"THEAD",{});var S=c(l);a=i(S,"TR",{});var _=c(a);h=i(_,"TH",{class:!0});var oe=c(h);d=u(oe,"Class"),oe.forEach(o),p=b(_),m=i(_,"TH",{class:!0});var J=c(m);v=u(J,"Confidence"),J.forEach(o),M=b(_),H=i(_,"TH",{class:!0});var G=c(H);q=u(G,"Top Left X px"),G.forEach(o),U=b(_),B=i(_,"TH",{class:!0});var ne=c(B);j=u(ne,"Top Left Y px"),ne.forEach(o),A=b(_),V=i(_,"TH",{class:!0});var le=c(V);$=u(le,"Width px"),le.forEach(o),L=b(_),P=i(_,"TH",{class:!0});var fe=c(P);R=u(fe,"Height px"),fe.forEach(o),_.forEach(o),S.forEach(o),se=b(x),z=i(x,"TBODY",{class:!0});var ae=c(z);for(let ve=0;ve<T.length;ve+=1)T[ve].l(ae);ae.forEach(o),x.forEach(o),this.h()},h(){w(h,"class","svelte-10g5ip5"),w(m,"class","svelte-10g5ip5"),w(H,"class","svelte-10g5ip5"),w(B,"class","svelte-10g5ip5"),w(V,"class","svelte-10g5ip5"),w(P,"class","svelte-10g5ip5"),w(z,"class","svelte-10g5ip5"),w(t,"class","svelte-10g5ip5")},m(C,x){F(C,t,x),e(t,l),e(l,a),e(a,h),e(h,d),e(a,p),e(a,m),e(m,v),e(a,M),e(a,H),e(H,q),e(a,U),e(a,B),e(B,j),e(a,A),e(a,V),e(V,$),e(a,L),e(a,P),e(P,R),e(t,se),e(t,z);for(let S=0;S<T.length;S+=1)T[S].m(z,null);N||(Z=[ke(z,"mouseout",n[22]),ke(z,"blur",n[23])],N=!0)},p(C,x){if(x[0]&96){O=C[6];let S;for(S=0;S<O.length;S+=1){const _=Kl(C,O,S);T[S]?T[S].p(_,x):(T[S]=aa(_),T[S].c(),T[S].m(z,null))}for(;S<T.length;S+=1)T[S].d(1);T.length=O.length}},d(C){C&&o(t),rt(T,C),N=!1,Gl(Z)}}}function aa(n){let t,l,a=n[42].class+"",h,d,p,m=n[42].score.toFixed(3)+"",v,M,H,q=Math.round(n[42].bbox[0])+"",U,B,j,A=Math.round(n[42].bbox[1])+"",V,$,L,P=Math.round(n[42].bbox[2])+"",R,se,z,N=Math.round(n[42].bbox[3])+"",Z,O,T,C;function x(){return n[21](n[44])}return{c(){t=r("tr"),l=r("td"),h=f(a),d=g(),p=r("td"),v=f(m),M=g(),H=r("td"),U=f(q),B=g(),j=r("td"),V=f(A),$=g(),L=r("td"),R=f(P),se=g(),z=r("td"),Z=f(N),O=g(),this.h()},l(S){t=i(S,"TR",{class:!0});var _=c(t);l=i(_,"TD",{class:!0});var oe=c(l);h=u(oe,a),oe.forEach(o),d=b(_),p=i(_,"TD",{class:!0});var J=c(p);v=u(J,m),J.forEach(o),M=b(_),H=i(_,"TD",{class:!0});var G=c(H);U=u(G,q),G.forEach(o),B=b(_),j=i(_,"TD",{class:!0});var ne=c(j);V=u(ne,A),ne.forEach(o),$=b(_),L=i(_,"TD",{class:!0});var le=c(L);R=u(le,P),le.forEach(o),se=b(_),z=i(_,"TD",{class:!0});var fe=c(z);Z=u(fe,N),fe.forEach(o),O=b(_),_.forEach(o),this.h()},h(){w(l,"class","svelte-10g5ip5"),w(p,"class","svelte-10g5ip5"),w(H,"class","svelte-10g5ip5"),w(j,"class","svelte-10g5ip5"),w(L,"class","svelte-10g5ip5"),w(z,"class","svelte-10g5ip5"),w(t,"class","svelte-10g5ip5")},m(S,_){F(S,t,_),e(t,l),e(l,h),e(t,d),e(t,p),e(p,v),e(t,M),e(t,H),e(H,U),e(t,B),e(t,j),e(j,V),e(t,$),e(t,L),e(L,R),e(t,se),e(t,z),e(z,Z),e(t,O),T||(C=ke(t,"mouseenter",x),T=!0)},p(S,_){n=S,_[0]&64&&a!==(a=n[42].class+"")&&Le(h,a),_[0]&64&&m!==(m=n[42].score.toFixed(3)+"")&&Le(v,m),_[0]&64&&q!==(q=Math.round(n[42].bbox[0])+"")&&Le(U,q),_[0]&64&&A!==(A=Math.round(n[42].bbox[1])+"")&&Le(V,A),_[0]&64&&P!==(P=Math.round(n[42].bbox[2])+"")&&Le(R,P),_[0]&64&&N!==(N=Math.round(n[42].bbox[3])+"")&&Le(Z,N)},d(S){S&&o(t),T=!1,C()}}}function sa(n){let t,l;return{c(){t=r("div"),l=f("Loading Model..."),this.h()},l(a){t=i(a,"DIV",{id:!0,class:!0});var h=c(t);l=u(h,"Loading Model..."),h.forEach(o),this.h()},h(){w(t,"id","loading-dimmer"),w(t,"class","svelte-10g5ip5")},m(a,h){F(a,t,h),e(t,l)},d(a){a&&o(t)}}}function Ca(n){let t;return{c(){t=f("Tensorflow.js COCO-SSD demo")},l(l){t=u(l,"Tensorflow.js COCO-SSD demo")},m(l,a){F(l,t,a)},d(l){l&&o(t)}}}function Oa(n){let t;return{c(){t=f("Common Objects in Context")},l(l){t=u(l,"Common Objects in Context")},m(l,a){F(l,t,a)},d(l){l&&o(t)}}}function Ma(n){let t;return{c(){t=f("full paper")},l(l){t=u(l,"full paper")},m(l,a){F(l,t,a)},d(l){l&&o(t)}}}function oa(n){let t,l=n[39]+"",a;return{c(){t=r("li"),a=f(l)},l(h){t=i(h,"LI",{});var d=c(t);a=u(d,l),d.forEach(o)},m(h,d){F(h,t,d),e(t,a)},p:bt,d(h){h&&o(t)}}}function na(n){let t,l,a,h=n[10].slice(n[36],n[36]+20),d=[];for(let p=0;p<h.length;p+=1)d[p]=oa(Xl(n,h,p));return{c(){t=r("div"),l=r("ul");for(let p=0;p<d.length;p+=1)d[p].c();a=g(),this.h()},l(p){t=i(p,"DIV",{class:!0});var m=c(t);l=i(m,"UL",{});var v=c(l);for(let M=0;M<d.length;M+=1)d[M].l(v);v.forEach(o),a=b(m),m.forEach(o),this.h()},h(){w(t,"class","svelte-10g5ip5")},m(p,m){F(p,t,m),e(t,l);for(let v=0;v<d.length;v+=1)d[v].m(l,null);e(t,a)},p(p,m){if(m[0]&3072){h=p[10].slice(p[36],p[36]+20);let v;for(v=0;v<h.length;v+=1){const M=Xl(p,h,v);d[v]?d[v].p(M,m):(d[v]=oa(M),d[v].c(),d[v].m(l,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=h.length}},d(p){p&&o(t),rt(d,p)}}}function ja(n){let t;return{c(){t=f("the docs")},l(l){t=u(l,"the docs")},m(l,a){F(l,t,a)},d(l){l&&o(t)}}}function La(n){let t,l,a,h,d,p,m,v,M,H,q,U,B,j,A,V,$,L,P,R,se,z,N,Z,O,T,C,x,S,_,oe,J,G,ne,le,fe,ae,ve,y,ee,re,ge,ue,ct,vl,wt,yt,Et,be,Je,St,$t,dt,kt,It,Dt,Tt,pe,Ct,ht,Ve,Ot,ft,k,Ge,Mt,jt,_e,Lt,we,Pt,Ye,Ht,At,Vt,qe,zt,Bt,Ie,Rt,De,Nt,Ft,Ut,Qe,Wt,xt,me,Jt,ye,Gt,Ee,Yt,qt,Te,Qt,gl=n[10].length+"",Xt,Kt,Zt,Se,el,Xe,tl,ll,Ke,al,sl,Ce,ol,$e,nl,rl,Ze,il,cl,et,dl,hl,tt,fl,ul,lt,pl,ze,_l,bl;j=new it({props:{href:"https://github.com/harryli0088/tfjs-test",$$slots:{default:[Ia]},$$scope:{ctx:n}}});let Be=n[9],Q=[];for(let s=0;s<Be.length;s+=1)Q[s]=ta(ea(n,Be,s));let Re=n[3],X=[];for(let s=0;s<Re.length;s+=1)X[s]=la(Zl(n,Re,s));le=new Jl({props:{icon:da}});function wl(s,I){return s[6].length>0?Ta:Da}let ut=wl(n),ie=ut(n),te=n[7]==="loading"&&sa();we=new it({props:{href:"https://github.com/tensorflow/tfjs-models/tree/master/coco-ssd",$$slots:{default:[Ca]},$$scope:{ctx:n}}}),ye=new it({props:{href:"https://cocodataset.org/#home",$$slots:{default:[Oa]},$$scope:{ctx:n}}}),Ee=new it({props:{href:"https://arxiv.org/abs/1512.02325",$$slots:{default:[Ma]},$$scope:{ctx:n}}});let Ne=n[11],K=[];for(let s=0;s<Ne.length;s+=1)K[s]=na(Ql(n,Ne,s));return $e=new it({props:{href:"https://www.tensorflow.org/js/guide/platform_environment",$$slots:{default:[ja]},$$scope:{ctx:n}}}),{c(){t=g(),l=r("header"),a=r("div"),h=r("h1"),d=f("TensorFlow.js"),p=g(),m=r("div"),v=r("i"),M=f("In-Browser Object Detection with SSD Mobilenet"),H=g(),q=r("br"),U=g(),B=r("div"),Oe(j.$$.fragment),A=g(),V=r("section"),$=r("div"),L=r("div"),P=r("label"),R=r("h3"),se=f("Select a Model:"),z=g(),N=r("select");for(let s=0;s<Q.length;s+=1)Q[s].c();Z=g(),O=r("div"),T=r("h3"),C=f("Select an Image to Analyze:"),x=g(),S=r("div"),_=r("div");for(let s=0;s<X.length;s+=1)X[s].c();oe=g(),J=r("div"),G=r("label"),ne=f(`Upload Your Own Image
          \xA0 `),Oe(le.$$.fragment),fe=g(),ae=r("input"),ve=g(),y=r("h3"),ee=f("Analyzed Image"),re=g(),ge=r("div"),ue=r("canvas"),wt=g(),yt=r("br"),Et=g(),be=r("div"),Je=r("b"),St=f("Prediction Time:"),$t=g(),dt=f(n[4]),kt=f("ms"),It=g(),Dt=r("br"),Tt=g(),pe=r("div"),ie.c(),Ct=g(),te&&te.c(),ht=g(),Ve=r("section"),Ot=r("hr"),ft=g(),k=r("section"),Ge=r("h2"),Mt=f("Background"),jt=g(),_e=r("p"),Lt=f("I made this website based off the "),Oe(we.$$.fragment),Pt=f(". The model is ported into Tensorflow.js and runs "),Ye=r("i"),Ht=f("completely"),At=f(" in your browser with no backend server component, pretty cool!"),Vt=g(),qe=r("h3"),zt=f("Why does the model [suck in some way]?"),Bt=g(),Ie=r("p"),Rt=f("As with all machine learning models, the model is only as good as the data you give it. This model was trained on the COCO dataset and will not perform as well on images that look different. Hilariously, SSD Lite Mobilenet V2 thinks the food image is a "),De=r("a"),Nt=f("refrigerator"),Ft=f("."),Ut=g(),Qe=r("h3"),Wt=f("COCO-SSD"),xt=g(),me=r("p"),Jt=f("COCO-SSD is an object detection model trained on the "),Oe(ye.$$.fragment),Gt=f(` (aka COCO) dataset. SSD stands for Single Shot MultiBox Detection
  which generates default boxes over different aspect ratios and scales, adjusts boxes during prediction time, and can combine predictions from multiple feature maps to handle various object sizes. SSD encapsulates all computation in a single Feed-Forward Convolutional Neural Network which eliminates proposal generation and resampling, making it easier to train and operationalize (`),Oe(Ee.$$.fragment),Yt=f(")."),qt=g(),Te=r("p"),Qt=f("Currently the models support these "),Xt=f(gl),Kt=f(" classes:"),Zt=g(),Se=r("div");for(let s=0;s<K.length;s+=1)K[s].c();el=g(),Xe=r("h3"),tl=f("Tensorflow? JavaScript? Is this for real??"),ll=g(),Ke=r("p"),al=f("I could hardly believe it myself, which is why I made this test website. I guess there's no running away from JavaScript."),sl=g(),Ce=r("p"),ol=f("Quoted from "),Oe($e.$$.fragment),nl=f(': "TensorFlow.js executes operations on the GPU by running WebGL shader programs. These shaders are assembled and compiled lazily when the user asks to execute an operation".'),rl=g(),Ze=r("p"),il=f("Say what you will about JavaScript; it's powerful enough to run client-side ML! (Some people even claim that you could do all the training in JS...but I haven't gotten there yet)"),cl=g(),et=r("h3"),dl=f("Advantages of client-side Machine Learning"),hl=g(),tt=r("p"),fl=f("Running ML models in a browser or even in a React Native mobile app can greatly simplify the application architecture. Instead of building a beefy server that can handle many prediction requests, you can simply cache the model in a Content Delivery Network and make the user's device do all the work for you!"),ul=g(),lt=r("p"),pl=f("Of course, one of the downsides of client-side ML is that your model is published for everyone to see, not good if you have some secret sauce. Also, extremely large models could eat up network bandwidth and a user's processing power, and not all client devices have GPU hardware."),this.h()},l(s){ha('[data-svelte="svelte-1sxv64u"]',ql.head).forEach(o),t=b(s),l=i(s,"HEADER",{class:!0});var Y=c(l);a=i(Y,"DIV",{});var ce=c(a);h=i(ce,"H1",{});var at=c(h);d=u(at,"TensorFlow.js"),at.forEach(o),p=b(ce),m=i(ce,"DIV",{});var st=c(m);v=i(st,"I",{});var ot=c(v);M=u(ot,"In-Browser Object Detection with SSD Mobilenet"),ot.forEach(o),st.forEach(o),H=b(ce),q=i(ce,"BR",{}),U=b(ce),B=i(ce,"DIV",{style:!0});var E=c(B);Me(j.$$.fragment,E),E.forEach(o),ce.forEach(o),Y.forEach(o),A=b(s),V=i(s,"SECTION",{});var de=c(V);$=i(de,"DIV",{style:!0});var W=c($);L=i(W,"DIV",{});var pt=c(L);P=i(pt,"LABEL",{for:!0,style:!0});var yl=c(P);R=i(yl,"H3",{});var El=c(R);se=u(El,"Select a Model:"),El.forEach(o),yl.forEach(o),z=b(pt),N=i(pt,"SELECT",{id:!0});var Sl=c(N);for(let he=0;he<Q.length;he+=1)Q[he].l(Sl);Sl.forEach(o),pt.forEach(o),Z=b(W),O=i(W,"DIV",{});var Fe=c(O);T=i(Fe,"H3",{});var $l=c(T);C=u($l,"Select an Image to Analyze:"),$l.forEach(o),x=b(Fe),S=i(Fe,"DIV",{id:!0,class:!0});var kl=c(S);_=i(kl,"DIV",{id:!0,class:!0});var Il=c(_);for(let he=0;he<X.length;he+=1)X[he].l(Il);Il.forEach(o),kl.forEach(o),oe=b(Fe),J=i(Fe,"DIV",{style:!0});var _t=c(J);G=i(_t,"LABEL",{id:!0,class:!0,for:!0});var ml=c(G);ne=u(ml,`Upload Your Own Image
          \xA0 `),Me(le.$$.fragment,ml),ml.forEach(o),fe=b(_t),ae=i(_t,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),_t.forEach(o),Fe.forEach(o),ve=b(W),y=i(W,"H3",{});var Dl=c(y);ee=u(Dl,"Analyzed Image"),Dl.forEach(o),re=b(W),ge=i(W,"DIV",{});var Tl=c(ge);ue=i(Tl,"CANVAS",{id:!0,style:!0,class:!0}),c(ue).forEach(o),Tl.forEach(o),wt=b(W),yt=i(W,"BR",{}),Et=b(W),be=i(W,"DIV",{});var nt=c(be);Je=i(nt,"B",{});var Cl=c(Je);St=u(Cl,"Prediction Time:"),Cl.forEach(o),$t=b(nt),dt=u(nt,n[4]),kt=u(nt,"ms"),nt.forEach(o),It=b(W),Dt=i(W,"BR",{}),Tt=b(W),pe=i(W,"DIV",{id:!0,style:!0,class:!0});var Ol=c(pe);ie.l(Ol),Ol.forEach(o),Ct=b(W),te&&te.l(W),W.forEach(o),de.forEach(o),ht=b(s),Ve=i(s,"SECTION",{});var Ml=c(Ve);Ot=i(Ml,"HR",{}),Ml.forEach(o),ft=b(s),k=i(s,"SECTION",{});var D=c(k);Ge=i(D,"H2",{});var jl=c(Ge);Mt=u(jl,"Background"),jl.forEach(o),jt=b(D),_e=i(D,"P",{});var Ue=c(_e);Lt=u(Ue,"I made this website based off the "),Me(we.$$.fragment,Ue),Pt=u(Ue,". The model is ported into Tensorflow.js and runs "),Ye=i(Ue,"I",{});var Ll=c(Ye);Ht=u(Ll,"completely"),Ll.forEach(o),At=u(Ue," in your browser with no backend server component, pretty cool!"),Ue.forEach(o),Vt=b(D),qe=i(D,"H3",{});var Pl=c(qe);zt=u(Pl,"Why does the model [suck in some way]?"),Pl.forEach(o),Bt=b(D),Ie=i(D,"P",{});var mt=c(Ie);Rt=u(mt,"As with all machine learning models, the model is only as good as the data you give it. This model was trained on the COCO dataset and will not perform as well on images that look different. Hilariously, SSD Lite Mobilenet V2 thinks the food image is a "),De=i(mt,"A",{href:!0});var Hl=c(De);Nt=u(Hl,"refrigerator"),Hl.forEach(o),Ft=u(mt,"."),mt.forEach(o),Ut=b(D),Qe=i(D,"H3",{});var Al=c(Qe);Wt=u(Al,"COCO-SSD"),Al.forEach(o),xt=b(D),me=i(D,"P",{});var We=c(me);Jt=u(We,"COCO-SSD is an object detection model trained on the "),Me(ye.$$.fragment,We),Gt=u(We,` (aka COCO) dataset. SSD stands for Single Shot MultiBox Detection
  which generates default boxes over different aspect ratios and scales, adjusts boxes during prediction time, and can combine predictions from multiple feature maps to handle various object sizes. SSD encapsulates all computation in a single Feed-Forward Convolutional Neural Network which eliminates proposal generation and resampling, making it easier to train and operationalize (`),Me(Ee.$$.fragment,We),Yt=u(We,")."),We.forEach(o),qt=b(D),Te=i(D,"P",{});var vt=c(Te);Qt=u(vt,"Currently the models support these "),Xt=u(vt,gl),Kt=u(vt," classes:"),vt.forEach(o),Zt=b(D),Se=i(D,"DIV",{id:!0,class:!0});var Vl=c(Se);for(let he=0;he<K.length;he+=1)K[he].l(Vl);Vl.forEach(o),el=b(D),Xe=i(D,"H3",{});var zl=c(Xe);tl=u(zl,"Tensorflow? JavaScript? Is this for real??"),zl.forEach(o),ll=b(D),Ke=i(D,"P",{});var Bl=c(Ke);al=u(Bl,"I could hardly believe it myself, which is why I made this test website. I guess there's no running away from JavaScript."),Bl.forEach(o),sl=b(D),Ce=i(D,"P",{});var gt=c(Ce);ol=u(gt,"Quoted from "),Me($e.$$.fragment,gt),nl=u(gt,': "TensorFlow.js executes operations on the GPU by running WebGL shader programs. These shaders are assembled and compiled lazily when the user asks to execute an operation".'),gt.forEach(o),rl=b(D),Ze=i(D,"P",{});var Rl=c(Ze);il=u(Rl,"Say what you will about JavaScript; it's powerful enough to run client-side ML! (Some people even claim that you could do all the training in JS...but I haven't gotten there yet)"),Rl.forEach(o),cl=b(D),et=i(D,"H3",{});var Nl=c(et);dl=u(Nl,"Advantages of client-side Machine Learning"),Nl.forEach(o),hl=b(D),tt=i(D,"P",{});var Fl=c(tt);fl=u(Fl,"Running ML models in a browser or even in a React Native mobile app can greatly simplify the application architecture. Instead of building a beefy server that can handle many prediction requests, you can simply cache the model in a Content Delivery Network and make the user's device do all the work for you!"),Fl.forEach(o),ul=b(D),lt=i(D,"P",{});var Ul=c(lt);pl=u(Ul,"Of course, one of the downsides of client-side ML is that your model is published for everyone to see, not good if you have some secret sauce. Also, extremely large models could eat up network bandwidth and a user's processing power, and not all client devices have GPU hardware."),Ul.forEach(o),D.forEach(o),this.h()},h(){ql.title="TensorFlow.js - In-Browser Object Detection with SSD Mobilenet",xe(B,"font-size","2em"),w(l,"class","svelte-10g5ip5"),w(P,"for","base-model"),xe(P,"display","inline-block"),w(N,"id","base-model"),w(_,"id","carousel"),w(_,"class","svelte-10g5ip5"),w(S,"id","carousel-container"),w(S,"class","svelte-10g5ip5"),w(G,"id","upload-images-button"),w(G,"class","label-button svelte-10g5ip5"),w(G,"for","upload-images"),w(ae,"type","file"),w(ae,"id","upload-images"),ae.multiple=!0,w(ae,"accept","image/*"),w(ae,"class","svelte-10g5ip5"),xe(J,"margin-top","0.5em"),xe(J,"text-align","right"),w(ue,"id","canvas"),w(ue,"style",ct=`width:${n[1]}px;`),w(ue,"class","svelte-10g5ip5"),fa(()=>n[20].call(ge)),w(pe,"id","table-container"),xe(pe,"overflow-x","auto"),w(pe,"class","svelte-10g5ip5"),xe($,"position","relative"),w(De,"href","#carousel"),w(Se,"id","classes-list"),w(Se,"class","svelte-10g5ip5")},m(s,I){F(s,t,I),F(s,l,I),e(l,a),e(a,h),e(h,d),e(a,p),e(a,m),e(m,v),e(v,M),e(a,H),e(a,q),e(a,U),e(a,B),je(j,B,null),F(s,A,I),F(s,V,I),e(V,$),e($,L),e(L,P),e(P,R),e(R,se),e(L,z),e(L,N);for(let Y=0;Y<Q.length;Y+=1)Q[Y].m(N,null);e($,Z),e($,O),e(O,T),e(T,C),e(O,x),e(O,S),e(S,_);for(let Y=0;Y<X.length;Y+=1)X[Y].m(_,null);e(O,oe),e(O,J),e(J,G),e(G,ne),je(le,G,null),e(J,fe),e(J,ae),e($,ve),e($,y),e(y,ee),e($,re),e($,ge),e(ge,ue),n[19](ue),vl=ua(ge,n[20].bind(ge)),e($,wt),e($,yt),e($,Et),e($,be),e(be,Je),e(Je,St),e(be,$t),e(be,dt),e(be,kt),e($,It),e($,Dt),e($,Tt),e($,pe),ie.m(pe,null),e($,Ct),te&&te.m($,null),F(s,ht,I),F(s,Ve,I),e(Ve,Ot),F(s,ft,I),F(s,k,I),e(k,Ge),e(Ge,Mt),e(k,jt),e(k,_e),e(_e,Lt),je(we,_e,null),e(_e,Pt),e(_e,Ye),e(Ye,Ht),e(_e,At),e(k,Vt),e(k,qe),e(qe,zt),e(k,Bt),e(k,Ie),e(Ie,Rt),e(Ie,De),e(De,Nt),e(Ie,Ft),e(k,Ut),e(k,Qe),e(Qe,Wt),e(k,xt),e(k,me),e(me,Jt),je(ye,me,null),e(me,Gt),je(Ee,me,null),e(me,Yt),e(k,qt),e(k,Te),e(Te,Qt),e(Te,Xt),e(Te,Kt),e(k,Zt),e(k,Se);for(let Y=0;Y<K.length;Y+=1)K[Y].m(Se,null);e(k,el),e(k,Xe),e(Xe,tl),e(k,ll),e(k,Ke),e(Ke,al),e(k,sl),e(k,Ce),e(Ce,ol),je($e,Ce,null),e(Ce,nl),e(k,rl),e(k,Ze),e(Ze,il),e(k,cl),e(k,et),e(et,dl),e(k,hl),e(k,tt),e(tt,fl),e(k,ul),e(k,lt),e(lt,pl),ze=!0,_l||(bl=[ke(N,"change",n[16]),ke(ae,"change",n[18]),ke(ae,"change",n[14]),ke(De,"click",n[24])],_l=!0)},p(s,I){const Y={};if(I[1]&524288&&(Y.$$scope={dirty:I,ctx:s}),j.$set(Y),I[0]&512){Be=s[9];let E;for(E=0;E<Be.length;E+=1){const de=ea(s,Be,E);Q[E]?Q[E].p(de,I):(Q[E]=ta(de),Q[E].c(),Q[E].m(N,null))}for(;E<Q.length;E+=1)Q[E].d(1);Q.length=Be.length}if(I[0]&8456){Re=s[3];let E;for(E=0;E<Re.length;E+=1){const de=Zl(s,Re,E);X[E]?X[E].p(de,I):(X[E]=la(de),X[E].c(),X[E].m(_,null))}for(;E<X.length;E+=1)X[E].d(1);X.length=Re.length}(!ze||I[0]&2&&ct!==(ct=`width:${s[1]}px;`))&&w(ue,"style",ct),(!ze||I[0]&16)&&Le(dt,s[4]),ut===(ut=wl(s))&&ie?ie.p(s,I):(ie.d(1),ie=ut(s),ie&&(ie.c(),ie.m(pe,null))),s[7]==="loading"?te||(te=sa(),te.c(),te.m($,null)):te&&(te.d(1),te=null);const ce={};I[1]&524288&&(ce.$$scope={dirty:I,ctx:s}),we.$set(ce);const at={};I[1]&524288&&(at.$$scope={dirty:I,ctx:s}),ye.$set(at);const st={};if(I[1]&524288&&(st.$$scope={dirty:I,ctx:s}),Ee.$set(st),I[0]&3072){Ne=s[11];let E;for(E=0;E<Ne.length;E+=1){const de=Ql(s,Ne,E);K[E]?K[E].p(de,I):(K[E]=na(de),K[E].c(),K[E].m(Se,null))}for(;E<K.length;E+=1)K[E].d(1);K.length=Ne.length}const ot={};I[1]&524288&&(ot.$$scope={dirty:I,ctx:s}),$e.$set(ot)},i(s){ze||(Pe(j.$$.fragment,s),Pe(le.$$.fragment,s),Pe(we.$$.fragment,s),Pe(ye.$$.fragment,s),Pe(Ee.$$.fragment,s),Pe($e.$$.fragment,s),ze=!0)},o(s){He(j.$$.fragment,s),He(le.$$.fragment,s),He(we.$$.fragment,s),He(ye.$$.fragment,s),He(Ee.$$.fragment,s),He($e.$$.fragment,s),ze=!1},d(s){s&&o(t),s&&o(l),Ae(j),s&&o(A),s&&o(V),rt(Q,s),rt(X,s),Ae(le),n[19](null),vl(),ie.d(),te&&te.d(),s&&o(ht),s&&o(Ve),s&&o(ft),s&&o(k),Ae(we),Ae(ye),Ae(Ee),rt(K,s),Ae($e),_l=!1,Gl(bl)}}}function Pa(n,t,l){const a=[{display:"SSD Lite Mobilenet V2",value:"lite_mobilenet_v2"},{display:"SSD Mobilenet V2",value:"mobilenet_v2"},{display:"SSD Mobilenet V1",value:"mobilenet_v1"}];let h,d,p=600,m,v,M=[Ea,Sa,$a,ka,Yl],H,q=0,U=-1,B=[],j="loading",A,V=0,$=10,L=100,P=1,R=100;const se=Object.values(pa).map(y=>y.displayName).sort(),z=[0,20,40,60],N=(y="lite_mobilenet_v2")=>wa.exports.load({base:y});_a(async()=>{h=ba(),m=d.getContext("2d"),H=N(),A=document.createElement("img"),O(0)});const Z=async(y,ee=!0)=>{l(7,j="loading"),(await H).dispose(),H=N(y),ee&&await T(),l(7,j="loaded")},O=y=>{l(7,j="loading"),l(8,V=y),A.onload=async()=>{await T(),C(),l(7,j="loaded")},A.src=M[V]},T=async()=>{try{const y=await H,ee=Date.now();l(6,B=await y.detect(A)),l(4,q=Date.now()-ee)}catch(y){console.error(y)}},C=()=>{const y=window.devicePixelRatio;L=A.height,R=A.width;let ee=0;if((h==null?void 0:h.os)==="iOS")for(;R*y*L*y>16777216;)L=L>>1,R=R>>1,ee++;l(0,d.height=L*y,d),l(0,d.width=R*y,d),m.scale(Math.max(1,y>>ee),Math.max(1,y>>ee));const re=Math.hypot(L,R);P=Math.ceil(re/1e3),$=P*10},x=()=>{if(v)for(let y=0;y<v.length;++y){const ee=v[y],re=new FileReader;re.onload=()=>{l(3,M=M.concat(re.result)),y===v.length-1&&O(M.length-1)},re.readAsDataURL(ee)}},S=async()=>{await Z("lite_mobilenet_v2",!1),await O(M.indexOf(Yl))};ma(()=>{m.drawImage(A,0,0),m.font=`${$}px Arial`,B.forEach((y,ee)=>{const re=U===ee;m.beginPath(),m.rect(...y.bbox),m.lineWidth=re?3*P:P,m.strokeStyle="green",m.fillStyle="green",m.stroke(),m.fillText(`${y.score.toFixed(3)} ${y.class}`,y.bbox[0],y.bbox[1]>$?y.bbox[1]-5:$+5)})});const _=y=>Z(y.target.value),oe=y=>O(y);function J(){v=this.files,l(2,v)}function G(y){ya[y?"unshift":"push"](()=>{d=y,l(0,d)})}function ne(){p=this.clientWidth,l(1,p)}return[d,p,v,M,q,U,B,j,V,a,se,z,Z,O,x,S,_,oe,J,G,ne,y=>l(5,U=y),()=>l(5,U=-1),()=>l(5,U=-1),()=>S()]}class Va extends ra{constructor(t){super();ia(this,t,Pa,La,ca,{},null,[-1,-1])}}export{Va as default};
