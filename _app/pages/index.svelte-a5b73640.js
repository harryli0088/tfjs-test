import{S as Yl,i as Ql,s as Xl,e as r,t as d,c as i,a as c,g as h,d as s,f as W,E as e,I as dl,b as u,J as Al,K as mt,L as be,M as Bl,N as Kl,k as p,j as ke,O as Zl,n as _,m as Ie,P as Be,Q as ea,o as De,R as ta,h as Te,x as Ce,u as Me,v as Oe,T as hl,U as Rl,A as la,z as aa,V as sa,W as oa,X as zl}from"../chunks/vendor-a0a436af.js";import{B as at}from"../chunks/Blanchor-7de40104.js";var na="/tfjs-test/_app/assets/beach-1cce24f1.jpg",ra="/tfjs-test/_app/assets/dogs-7a39fd04.jpg",ia="/tfjs-test/_app/assets/food-fa9167d1.jpeg",ca="/tfjs-test/_app/assets/kittens-6dbc1477.jpeg";function Nl(n,t,l){const a=n.slice();return a[30]=t[l],a[32]=l,a}function Fl(n,t,l){const a=n.slice();return a[33]=t[l],a[32]=l,a}function Ul(n,t,l){const a=n.slice();return a[35]=t[l],a}function da(n){let t,l;return t=new Bl({props:{class:"icon-button",icon:sa,style:"color:white;"}}),{c(){ke(t.$$.fragment)},l(a){Ie(t.$$.fragment,a)},m(a,m){De(t,a,m),l=!0},p:dl,i(a){l||(Ce(t.$$.fragment,a),l=!0)},o(a){Me(t.$$.fragment,a),l=!1},d(a){Oe(t,a)}}}function Wl(n){let t,l=n[35].display+"",a,m;return{c(){t=r("option"),a=d(l),this.h()},l(S){t=i(S,"OPTION",{});var g=c(t);a=h(g,l),g.forEach(s),this.h()},h(){t.__value=m=n[35].value,t.value=t.__value},m(S,g){W(S,t,g),e(t,a)},p:dl,d(S){S&&s(t)}}}function Gl(n){let t,l,a,m,S;function g(){return n[16](n[32])}return{c(){t=r("img"),this.h()},l(y){t=i(y,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){u(t,"alt","analyze option"),u(t,"class",l=""+(Al(`image-option ${n[9]===n[32]?"focused":""}`)+" svelte-1j7lxe4")),mt(t.src,a=n[33])||u(t,"src",a)},m(y,I){W(y,t,I),m||(S=be(t,"click",g),m=!0)},p(y,I){n=y,I[0]&512&&l!==(l=""+(Al(`image-option ${n[9]===n[32]?"focused":""}`)+" svelte-1j7lxe4"))&&u(t,"class",l),I[0]&8&&!mt(t.src,a=n[33])&&u(t,"src",a)},d(y){y&&s(t),m=!1,S()}}}function ha(n){let t,l,a;return{c(){t=r("div"),l=r("b"),a=d("The model did not detect any objects")},l(m){t=i(m,"DIV",{});var S=c(t);l=i(S,"B",{});var g=c(l);a=h(g,"The model did not detect any objects"),g.forEach(s),S.forEach(s)},m(m,S){W(m,t,S),e(t,l),e(l,a)},p:dl,d(m){m&&s(t)}}}function fa(n){let t,l,a,m,S,g,y,I,J,L,q,F,V,C,O,A,b,H,M,U,te,x,R,le,P=n[6],j=[];for(let D=0;D<P.length;D+=1)j[D]=Jl(Nl(n,P,D));return{c(){t=r("table"),l=r("thead"),a=r("tr"),m=r("th"),S=d("Class"),g=p(),y=r("th"),I=d("Confidence"),J=p(),L=r("th"),q=d("Top Left X px"),F=p(),V=r("th"),C=d("Top Left Y px"),O=p(),A=r("th"),b=d("Width px"),H=p(),M=r("th"),U=d("Height px"),te=p(),x=r("tbody");for(let D=0;D<j.length;D+=1)j[D].c();this.h()},l(D){t=i(D,"TABLE",{class:!0});var G=c(t);l=i(G,"THEAD",{});var w=c(l);a=i(w,"TR",{});var f=c(a);m=i(f,"TH",{class:!0});var re=c(m);S=h(re,"Class"),re.forEach(s),g=_(f),y=i(f,"TH",{class:!0});var Y=c(y);I=h(Y,"Confidence"),Y.forEach(s),J=_(f),L=i(f,"TH",{class:!0});var v=c(L);q=h(v,"Top Left X px"),v.forEach(s),F=_(f),V=i(f,"TH",{class:!0});var N=c(V);C=h(N,"Top Left Y px"),N.forEach(s),O=_(f),A=i(f,"TH",{class:!0});var B=c(A);b=h(B,"Width px"),B.forEach(s),H=_(f),M=i(f,"TH",{class:!0});var Q=c(M);U=h(Q,"Height px"),Q.forEach(s),f.forEach(s),w.forEach(s),te=_(G),x=i(G,"TBODY",{class:!0});var Z=c(x);for(let ie=0;ie<j.length;ie+=1)j[ie].l(Z);Z.forEach(s),G.forEach(s),this.h()},h(){u(m,"class","svelte-1j7lxe4"),u(y,"class","svelte-1j7lxe4"),u(L,"class","svelte-1j7lxe4"),u(V,"class","svelte-1j7lxe4"),u(A,"class","svelte-1j7lxe4"),u(M,"class","svelte-1j7lxe4"),u(x,"class","svelte-1j7lxe4"),u(t,"class","svelte-1j7lxe4")},m(D,G){W(D,t,G),e(t,l),e(l,a),e(a,m),e(m,S),e(a,g),e(a,y),e(y,I),e(a,J),e(a,L),e(L,q),e(a,F),e(a,V),e(V,C),e(a,O),e(a,A),e(A,b),e(a,H),e(a,M),e(M,U),e(t,te),e(t,x);for(let w=0;w<j.length;w+=1)j[w].m(x,null);R||(le=[be(x,"mouseout",n[22]),be(x,"blur",n[23])],R=!0)},p(D,G){if(G[0]&96){P=D[6];let w;for(w=0;w<P.length;w+=1){const f=Nl(D,P,w);j[w]?j[w].p(f,G):(j[w]=Jl(f),j[w].c(),j[w].m(x,null))}for(;w<j.length;w+=1)j[w].d(1);j.length=P.length}},d(D){D&&s(t),hl(j,D),R=!1,Rl(le)}}}function Jl(n){let t,l,a=n[30].class+"",m,S,g,y=n[30].score.toFixed(3)+"",I,J,L,q=Math.round(n[30].bbox[0])+"",F,V,C,O=Math.round(n[30].bbox[1])+"",A,b,H,M=Math.round(n[30].bbox[2])+"",U,te,x,R=Math.round(n[30].bbox[3])+"",le,P,j,D;function G(){return n[21](n[32])}return{c(){t=r("tr"),l=r("td"),m=d(a),S=p(),g=r("td"),I=d(y),J=p(),L=r("td"),F=d(q),V=p(),C=r("td"),A=d(O),b=p(),H=r("td"),U=d(M),te=p(),x=r("td"),le=d(R),P=p(),this.h()},l(w){t=i(w,"TR",{class:!0});var f=c(t);l=i(f,"TD",{class:!0});var re=c(l);m=h(re,a),re.forEach(s),S=_(f),g=i(f,"TD",{class:!0});var Y=c(g);I=h(Y,y),Y.forEach(s),J=_(f),L=i(f,"TD",{class:!0});var v=c(L);F=h(v,q),v.forEach(s),V=_(f),C=i(f,"TD",{class:!0});var N=c(C);A=h(N,O),N.forEach(s),b=_(f),H=i(f,"TD",{class:!0});var B=c(H);U=h(B,M),B.forEach(s),te=_(f),x=i(f,"TD",{class:!0});var Q=c(x);le=h(Q,R),Q.forEach(s),P=_(f),f.forEach(s),this.h()},h(){u(l,"class","svelte-1j7lxe4"),u(g,"class","svelte-1j7lxe4"),u(L,"class","svelte-1j7lxe4"),u(C,"class","svelte-1j7lxe4"),u(H,"class","svelte-1j7lxe4"),u(x,"class","svelte-1j7lxe4"),u(t,"class","svelte-1j7lxe4")},m(w,f){W(w,t,f),e(t,l),e(l,m),e(t,S),e(t,g),e(g,I),e(t,J),e(t,L),e(L,F),e(t,V),e(t,C),e(C,A),e(t,b),e(t,H),e(H,U),e(t,te),e(t,x),e(x,le),e(t,P),j||(D=be(t,"mouseenter",G),j=!0)},p(w,f){n=w,f[0]&64&&a!==(a=n[30].class+"")&&Te(m,a),f[0]&64&&y!==(y=n[30].score.toFixed(3)+"")&&Te(I,y),f[0]&64&&q!==(q=Math.round(n[30].bbox[0])+"")&&Te(F,q),f[0]&64&&O!==(O=Math.round(n[30].bbox[1])+"")&&Te(A,O),f[0]&64&&M!==(M=Math.round(n[30].bbox[2])+"")&&Te(U,M),f[0]&64&&R!==(R=Math.round(n[30].bbox[3])+"")&&Te(le,R)},d(w){w&&s(t),j=!1,D()}}}function ql(n){let t,l;return{c(){t=r("div"),l=d("Loading Model..."),this.h()},l(a){t=i(a,"DIV",{id:!0,class:!0});var m=c(t);l=h(m,"Loading Model..."),m.forEach(s),this.h()},h(){u(t,"id","loading-dimmer"),u(t,"class","svelte-1j7lxe4")},m(a,m){W(a,t,m),e(t,l)},d(a){a&&s(t)}}}function ua(n){let t;return{c(){t=d("Tensorflow.js COCO-SSD demo")},l(l){t=h(l,"Tensorflow.js COCO-SSD demo")},m(l,a){W(l,t,a)},d(l){l&&s(t)}}}function ma(n){let t;return{c(){t=d("Common Objects in Context")},l(l){t=h(l,"Common Objects in Context")},m(l,a){W(l,t,a)},d(l){l&&s(t)}}}function pa(n){let t;return{c(){t=d("full paper")},l(l){t=h(l,"full paper")},m(l,a){W(l,t,a)},d(l){l&&s(t)}}}function _a(n){let t;return{c(){t=d("the docs")},l(l){t=h(l,"the docs")},m(l,a){W(l,t,a)},d(l){l&&s(t)}}}function va(n){let t,l,a,m,S,g,y,I,J,L,q,F,V,C,O,A,b,H,M,U,te,x,R,le,P,j,D,G,w,f,re,Y,v,N,B,Q,Z,ie,Re,pt,_t,ze,se,st,vt,fe,ce,ot,fl,gt,bt,wt,ue,Ne,yt,Et,nt,St,$t,jt,kt,we,It,rt,xe,Dt,it,E,Fe,Tt,Ct,de,Mt,me,Ot,Ue,xt,Lt,Ht,We,Pt,Vt,ye,At,Ee,Bt,Rt,zt,Ge,Nt,Ft,he,Ut,pe,Wt,_e,Gt,Jt,Je,qt,Yt,qe,Qt,Xt,Se,Kt,ve,Zt,el,Ye,tl,ll,Qe,al,sl,Xe,ol,nl,Ke,rl,$e,il,ul;C=new at({props:{href:"https://github.com/harryli0088/tfjs-test",$$slots:{default:[da]},$$scope:{ctx:n}}});let Le=n[10],X=[];for(let o=0;o<Le.length;o+=1)X[o]=Wl(Ul(n,Le,o));let He=n[3],K=[];for(let o=0;o<He.length;o+=1)K[o]=Gl(Fl(n,He,o));B=new Bl({props:{icon:Kl}});function ml(o,$){return o[6].length>0?fa:ha}let ct=ml(n),oe=ct(n),ee=n[7]==="loading"&&ql();return me=new at({props:{href:"https://github.com/tensorflow/tfjs-models/tree/master/coco-ssd",$$slots:{default:[ua]},$$scope:{ctx:n}}}),pe=new at({props:{href:"https://cocodataset.org/#home",$$slots:{default:[ma]},$$scope:{ctx:n}}}),_e=new at({props:{href:"https://arxiv.org/abs/1512.02325",$$slots:{default:[pa]},$$scope:{ctx:n}}}),ve=new at({props:{href:"https://www.tensorflow.org/js/guide/platform_environment",$$slots:{default:[_a]},$$scope:{ctx:n}}}),{c(){t=p(),l=r("header"),a=r("div"),m=r("h1"),S=d("TensorFlow.js"),g=p(),y=r("div"),I=r("i"),J=d("In-Browser Object Detection with SSD Mobilenet"),L=p(),q=r("br"),F=p(),V=r("div"),ke(C.$$.fragment),O=p(),A=r("section"),b=r("div"),H=r("div"),M=r("label"),U=r("h3"),te=d("Select a Model:"),x=p(),R=r("select");for(let o=0;o<X.length;o+=1)X[o].c();le=p(),P=r("div"),j=r("h3"),D=d("Select an Image to Analyze:"),G=p(),w=r("div"),f=r("div");for(let o=0;o<K.length;o+=1)K[o].c();re=p(),Y=r("div"),v=r("label"),N=d(`Upload Your Own Image
          \xA0 `),ke(B.$$.fragment),Q=p(),Z=r("input"),ie=p(),Re=r("h3"),pt=d("Analyzed Image"),_t=p(),ze=r("div"),se=r("img"),vt=p(),fe=r("div"),ce=r("canvas"),gt=p(),bt=r("br"),wt=p(),ue=r("div"),Ne=r("b"),yt=d("Prediction Time:"),Et=p(),nt=d(n[4]),St=d("ms"),$t=p(),jt=r("br"),kt=p(),we=r("div"),oe.c(),It=p(),ee&&ee.c(),rt=p(),xe=r("section"),Dt=r("hr"),it=p(),E=r("section"),Fe=r("h2"),Tt=d("Background"),Ct=p(),de=r("p"),Mt=d("I made this website based off the "),ke(me.$$.fragment),Ot=d(". The model is ported into Tensorflow.js and runs "),Ue=r("i"),xt=d("completely"),Lt=d(" in your browser with no backend server component, pretty cool!"),Ht=p(),We=r("h3"),Pt=d("Why does the model [suck in some way]?"),Vt=p(),ye=r("p"),At=d("As with all machine learning models, the model is only as good as the data you give it. This model was trained on the COCO dataset and will not perform as well on images that look different. Hilariously, SSD Lite Mobilenet V2 thinks the food image is a "),Ee=r("span"),Bt=d("refrigerator"),Rt=d("."),zt=p(),Ge=r("h3"),Nt=d("COCO-SSD"),Ft=p(),he=r("p"),Ut=d("COCO-SSD is an object detection model trained on the "),ke(pe.$$.fragment),Wt=d(` (aka COCO) dataset. SSD stands for Single Shot MultiBox Detection
  which generates default boxes over different aspect ratios and scales, adjusts boxes during prediction time, and can combine predictions from multiple feature maps to handle various object sizes. SSD encapsulates all computation in a single Feed-Forward Convolutional Neural Network which eliminates proposal generation and resampling, making it easier to train and operationalize (`),ke(_e.$$.fragment),Gt=d(")."),Jt=p(),Je=r("h3"),qt=d("Tensorflow? JavaScript? Is this for real??"),Yt=p(),qe=r("p"),Qt=d("I could hardly believe it myself, which is why I made this test website. I guess there is no running away from JavaScript."),Xt=p(),Se=r("p"),Kt=d("Quoted from "),ke(ve.$$.fragment),Zt=d(': "TensorFlow.js executes operations on the GPU by running WebGL shader programs. These shaders are assembled and compiled lazily when the user asks to execute an operation".'),el=p(),Ye=r("p"),tl=d("Say what you will about JavaScript; it's powerful enough to run client-side ML! (Some people even claim that you could do all the training in JS...but I haven't gotten there yet)"),ll=p(),Qe=r("h3"),al=d("Advantages of client-side Machine Learning"),sl=p(),Xe=r("p"),ol=d("Running ML models in a browser or even in a React Native mobile app can greatly simplify the application architecture. Instead of building a beefy server that can handle many prediction requests, you can simply cache the model in a Content Delivery Network and make the user's device do all the work for you!"),nl=p(),Ke=r("p"),rl=d("Of course, one of the downsides of client-side ML is that your model is published for everyone to see, not good if you have some secret sauce. Also, extremely large models could eat up network bandwidth and a user's processing power, and not all client devices have GPU hardware."),this.h()},l(o){Zl('[data-svelte="svelte-1anpopb"]',document.head).forEach(s),t=_(o),l=i(o,"HEADER",{class:!0});var ae=c(l);a=i(ae,"DIV",{});var ne=c(a);m=i(ne,"H1",{});var Ze=c(m);S=h(Ze,"TensorFlow.js"),Ze.forEach(s),g=_(ne),y=i(ne,"DIV",{});var et=c(y);I=i(et,"I",{});var tt=c(I);J=h(tt,"In-Browser Object Detection with SSD Mobilenet"),tt.forEach(s),et.forEach(s),L=_(ne),q=i(ne,"BR",{}),F=_(ne),V=i(ne,"DIV",{style:!0});var k=c(V);Ie(C.$$.fragment,k),k.forEach(s),ne.forEach(s),ae.forEach(s),O=_(o),A=i(o,"SECTION",{});var ge=c(A);b=i(ge,"DIV",{style:!0});var z=c(b);H=i(z,"DIV",{});var dt=c(H);M=i(dt,"LABEL",{for:!0,style:!0});var pl=c(M);U=i(pl,"H3",{});var _l=c(U);te=h(_l,"Select a Model:"),_l.forEach(s),pl.forEach(s),x=_(dt),R=i(dt,"SELECT",{id:!0});var vl=c(R);for(let je=0;je<X.length;je+=1)X[je].l(vl);vl.forEach(s),dt.forEach(s),le=_(z),P=i(z,"DIV",{});var Pe=c(P);j=i(Pe,"H3",{});var gl=c(j);D=h(gl,"Select an Image to Analyze:"),gl.forEach(s),G=_(Pe),w=i(Pe,"DIV",{id:!0,class:!0});var bl=c(w);f=i(bl,"DIV",{id:!0,class:!0});var wl=c(f);for(let je=0;je<K.length;je+=1)K[je].l(wl);wl.forEach(s),bl.forEach(s),re=_(Pe),Y=i(Pe,"DIV",{style:!0});var ht=c(Y);v=i(ht,"LABEL",{id:!0,class:!0,for:!0});var cl=c(v);N=h(cl,`Upload Your Own Image
          \xA0 `),Ie(B.$$.fragment,cl),cl.forEach(s),Q=_(ht),Z=i(ht,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),ht.forEach(s),Pe.forEach(s),ie=_(z),Re=i(z,"H3",{});var yl=c(Re);pt=h(yl,"Analyzed Image"),yl.forEach(s),_t=_(z),ze=i(z,"DIV",{});var El=c(ze);se=i(El,"IMG",{alt:!0,id:!0,src:!0,class:!0}),El.forEach(s),vt=_(z),fe=i(z,"DIV",{});var Sl=c(fe);ce=i(Sl,"CANVAS",{id:!0,style:!0,class:!0}),c(ce).forEach(s),Sl.forEach(s),gt=_(z),bt=i(z,"BR",{}),wt=_(z),ue=i(z,"DIV",{});var lt=c(ue);Ne=i(lt,"B",{});var $l=c(Ne);yt=h($l,"Prediction Time:"),$l.forEach(s),Et=_(lt),nt=h(lt,n[4]),St=h(lt,"ms"),lt.forEach(s),$t=_(z),jt=i(z,"BR",{}),kt=_(z),we=i(z,"DIV",{style:!0});var jl=c(we);oe.l(jl),jl.forEach(s),It=_(z),ee&&ee.l(z),z.forEach(s),ge.forEach(s),rt=_(o),xe=i(o,"SECTION",{});var kl=c(xe);Dt=i(kl,"HR",{}),kl.forEach(s),it=_(o),E=i(o,"SECTION",{});var T=c(E);Fe=i(T,"H2",{});var Il=c(Fe);Tt=h(Il,"Background"),Il.forEach(s),Ct=_(T),de=i(T,"P",{});var Ve=c(de);Mt=h(Ve,"I made this website based off the "),Ie(me.$$.fragment,Ve),Ot=h(Ve,". The model is ported into Tensorflow.js and runs "),Ue=i(Ve,"I",{});var Dl=c(Ue);xt=h(Dl,"completely"),Dl.forEach(s),Lt=h(Ve," in your browser with no backend server component, pretty cool!"),Ve.forEach(s),Ht=_(T),We=i(T,"H3",{});var Tl=c(We);Pt=h(Tl,"Why does the model [suck in some way]?"),Tl.forEach(s),Vt=_(T),ye=i(T,"P",{});var ft=c(ye);At=h(ft,"As with all machine learning models, the model is only as good as the data you give it. This model was trained on the COCO dataset and will not perform as well on images that look different. Hilariously, SSD Lite Mobilenet V2 thinks the food image is a "),Ee=i(ft,"SPAN",{class:!0});var Cl=c(Ee);Bt=h(Cl,"refrigerator"),Cl.forEach(s),Rt=h(ft,"."),ft.forEach(s),zt=_(T),Ge=i(T,"H3",{});var Ml=c(Ge);Nt=h(Ml,"COCO-SSD"),Ml.forEach(s),Ft=_(T),he=i(T,"P",{});var Ae=c(he);Ut=h(Ae,"COCO-SSD is an object detection model trained on the "),Ie(pe.$$.fragment,Ae),Wt=h(Ae,` (aka COCO) dataset. SSD stands for Single Shot MultiBox Detection
  which generates default boxes over different aspect ratios and scales, adjusts boxes during prediction time, and can combine predictions from multiple feature maps to handle various object sizes. SSD encapsulates all computation in a single Feed-Forward Convolutional Neural Network which eliminates proposal generation and resampling, making it easier to train and operationalize (`),Ie(_e.$$.fragment,Ae),Gt=h(Ae,")."),Ae.forEach(s),Jt=_(T),Je=i(T,"H3",{});var Ol=c(Je);qt=h(Ol,"Tensorflow? JavaScript? Is this for real??"),Ol.forEach(s),Yt=_(T),qe=i(T,"P",{});var xl=c(qe);Qt=h(xl,"I could hardly believe it myself, which is why I made this test website. I guess there is no running away from JavaScript."),xl.forEach(s),Xt=_(T),Se=i(T,"P",{});var ut=c(Se);Kt=h(ut,"Quoted from "),Ie(ve.$$.fragment,ut),Zt=h(ut,': "TensorFlow.js executes operations on the GPU by running WebGL shader programs. These shaders are assembled and compiled lazily when the user asks to execute an operation".'),ut.forEach(s),el=_(T),Ye=i(T,"P",{});var Ll=c(Ye);tl=h(Ll,"Say what you will about JavaScript; it's powerful enough to run client-side ML! (Some people even claim that you could do all the training in JS...but I haven't gotten there yet)"),Ll.forEach(s),ll=_(T),Qe=i(T,"H3",{});var Hl=c(Qe);al=h(Hl,"Advantages of client-side Machine Learning"),Hl.forEach(s),sl=_(T),Xe=i(T,"P",{});var Pl=c(Xe);ol=h(Pl,"Running ML models in a browser or even in a React Native mobile app can greatly simplify the application architecture. Instead of building a beefy server that can handle many prediction requests, you can simply cache the model in a Content Delivery Network and make the user's device do all the work for you!"),Pl.forEach(s),nl=_(T),Ke=i(T,"P",{});var Vl=c(Ke);rl=h(Vl,"Of course, one of the downsides of client-side ML is that your model is published for everyone to see, not good if you have some secret sauce. Also, extremely large models could eat up network bandwidth and a user's processing power, and not all client devices have GPU hardware."),Vl.forEach(s),T.forEach(s),this.h()},h(){document.title="Home",Be(V,"font-size","2em"),u(l,"class","svelte-1j7lxe4"),u(M,"for","base-model"),Be(M,"display","inline-block"),u(R,"id","base-model"),u(f,"id","carousel"),u(f,"class","svelte-1j7lxe4"),u(w,"id","carousel-container"),u(w,"class","svelte-1j7lxe4"),u(v,"id","upload-images-button"),u(v,"class","label-button svelte-1j7lxe4"),u(v,"for","upload-images"),u(Z,"type","file"),u(Z,"id","upload-images"),Z.multiple=!0,u(Z,"accept","image/*"),u(Z,"class","svelte-1j7lxe4"),Be(Y,"margin-top","0.5em"),Be(Y,"text-align","right"),u(se,"alt","input"),u(se,"id","target-image"),mt(se.src,st=n[3][n[9]])||u(se,"src",st),u(se,"class","svelte-1j7lxe4"),u(ce,"id","canvas"),u(ce,"style",ot=`width:${n[1]}px;`),u(ce,"class","svelte-1j7lxe4"),ea(()=>n[20].call(fe)),Be(we,"overflow-x","auto"),Be(b,"position","relative"),u(Ee,"class","fake-anchor svelte-1j7lxe4")},m(o,$){W(o,t,$),W(o,l,$),e(l,a),e(a,m),e(m,S),e(a,g),e(a,y),e(y,I),e(I,J),e(a,L),e(a,q),e(a,F),e(a,V),De(C,V,null),W(o,O,$),W(o,A,$),e(A,b),e(b,H),e(H,M),e(M,U),e(U,te),e(H,x),e(H,R);for(let ae=0;ae<X.length;ae+=1)X[ae].m(R,null);e(b,le),e(b,P),e(P,j),e(j,D),e(P,G),e(P,w),e(w,f);for(let ae=0;ae<K.length;ae+=1)K[ae].m(f,null);e(P,re),e(P,Y),e(Y,v),e(v,N),De(B,v,null),e(Y,Q),e(Y,Z),e(b,ie),e(b,Re),e(Re,pt),e(b,_t),e(b,ze),e(ze,se),n[18](se),e(b,vt),e(b,fe),e(fe,ce),n[19](ce),fl=ta(fe,n[20].bind(fe)),e(b,gt),e(b,bt),e(b,wt),e(b,ue),e(ue,Ne),e(Ne,yt),e(ue,Et),e(ue,nt),e(ue,St),e(b,$t),e(b,jt),e(b,kt),e(b,we),oe.m(we,null),e(b,It),ee&&ee.m(b,null),W(o,rt,$),W(o,xe,$),e(xe,Dt),W(o,it,$),W(o,E,$),e(E,Fe),e(Fe,Tt),e(E,Ct),e(E,de),e(de,Mt),De(me,de,null),e(de,Ot),e(de,Ue),e(Ue,xt),e(de,Lt),e(E,Ht),e(E,We),e(We,Pt),e(E,Vt),e(E,ye),e(ye,At),e(ye,Ee),e(Ee,Bt),e(ye,Rt),e(E,zt),e(E,Ge),e(Ge,Nt),e(E,Ft),e(E,he),e(he,Ut),De(pe,he,null),e(he,Wt),De(_e,he,null),e(he,Gt),e(E,Jt),e(E,Je),e(Je,qt),e(E,Yt),e(E,qe),e(qe,Qt),e(E,Xt),e(E,Se),e(Se,Kt),De(ve,Se,null),e(Se,Zt),e(E,el),e(E,Ye),e(Ye,tl),e(E,ll),e(E,Qe),e(Qe,al),e(E,sl),e(E,Xe),e(Xe,ol),e(E,nl),e(E,Ke),e(Ke,rl),$e=!0,il||(ul=[be(R,"change",n[15]),be(Z,"change",n[17]),be(Z,"change",n[13]),be(Ee,"click",n[24])],il=!0)},p(o,$){const ae={};if($[1]&128&&(ae.$$scope={dirty:$,ctx:o}),C.$set(ae),$[0]&1024){Le=o[10];let k;for(k=0;k<Le.length;k+=1){const ge=Ul(o,Le,k);X[k]?X[k].p(ge,$):(X[k]=Wl(ge),X[k].c(),X[k].m(R,null))}for(;k<X.length;k+=1)X[k].d(1);X.length=Le.length}if($[0]&4616){He=o[3];let k;for(k=0;k<He.length;k+=1){const ge=Fl(o,He,k);K[k]?K[k].p(ge,$):(K[k]=Gl(ge),K[k].c(),K[k].m(f,null))}for(;k<K.length;k+=1)K[k].d(1);K.length=He.length}(!$e||$[0]&520&&!mt(se.src,st=o[3][o[9]]))&&u(se,"src",st),(!$e||$[0]&2&&ot!==(ot=`width:${o[1]}px;`))&&u(ce,"style",ot),(!$e||$[0]&16)&&Te(nt,o[4]),ct===(ct=ml(o))&&oe?oe.p(o,$):(oe.d(1),oe=ct(o),oe&&(oe.c(),oe.m(we,null))),o[7]==="loading"?ee||(ee=ql(),ee.c(),ee.m(b,null)):ee&&(ee.d(1),ee=null);const ne={};$[1]&128&&(ne.$$scope={dirty:$,ctx:o}),me.$set(ne);const Ze={};$[1]&128&&(Ze.$$scope={dirty:$,ctx:o}),pe.$set(Ze);const et={};$[1]&128&&(et.$$scope={dirty:$,ctx:o}),_e.$set(et);const tt={};$[1]&128&&(tt.$$scope={dirty:$,ctx:o}),ve.$set(tt)},i(o){$e||(Ce(C.$$.fragment,o),Ce(B.$$.fragment,o),Ce(me.$$.fragment,o),Ce(pe.$$.fragment,o),Ce(_e.$$.fragment,o),Ce(ve.$$.fragment,o),$e=!0)},o(o){Me(C.$$.fragment,o),Me(B.$$.fragment,o),Me(me.$$.fragment,o),Me(pe.$$.fragment,o),Me(_e.$$.fragment,o),Me(ve.$$.fragment,o),$e=!1},d(o){o&&s(t),o&&s(l),Oe(C),o&&s(O),o&&s(A),hl(X,o),hl(K,o),Oe(B),n[18](null),n[19](null),fl(),oe.d(),ee&&ee.d(),o&&s(rt),o&&s(xe),o&&s(it),o&&s(E),Oe(me),Oe(pe),Oe(_e),Oe(ve),il=!1,Rl(ul)}}}function ga(n,t,l){const a=[{display:"SSD Lite Mobilenet V2",value:"lite_mobilenet_v2"},{display:"SSD Mobilenet V2",value:"mobilenet_v2"},{display:"SSD Mobilenet V1",value:"mobilenet_v1"}];let m,S=600,g,y=1,I,J=[na,ra,ca,ia],L,q=0,F=-1,V=[],C="loading",O,A=0;const b=(v="lite_mobilenet_v2")=>oa.exports.load({base:v});la(async()=>{y=window.devicePixelRatio,g=m.getContext("2d"),L=b(),await U(),l(7,C="loaded")});const H=async(v,N=!0)=>{l(7,C="loading"),(await L).dispose(),L=b(v),N&&await U()},M=async v=>{l(9,A=v),await U()},U=async()=>{l(7,C="loading");const v=await L,N=Date.now();l(6,V=await v.detect(O)),l(4,q=Date.now()-N),l(7,C="loaded")};aa(()=>{l(0,m.height=O.height*y,m),l(0,m.width=O.width*y,m),g.scale(y,y);const v=Math.hypot(O.height,O.width),N=Math.ceil(v/1e3),B=N*10;g.drawImage(O,0,0),g.font=`${B}px Arial`,V.forEach((Q,Z)=>{const ie=F===Z;g.beginPath(),g.rect(...Q.bbox),g.lineWidth=ie?3*N:N,g.strokeStyle="green",g.fillStyle="green",g.stroke(),g.fillText(`${Q.score.toFixed(3)} ${Q.class}`,Q.bbox[0],Q.bbox[1]>B?Q.bbox[1]-5:B+5)})});const te=()=>{if(I)for(let v=0;v<I.length;++v){const N=I[v],B=new FileReader;B.onload=()=>{l(3,J=J.concat(B.result)),v===I.length-1&&M(J.length-1)},B.readAsDataURL(N)}},x=async()=>{await H("lite_mobilenet_v2",!1),await M(3)},R=v=>H(v.target.value),le=v=>M(v);function P(){I=this.files,l(2,I)}function j(v){zl[v?"unshift":"push"](()=>{O=v,l(8,O)})}function D(v){zl[v?"unshift":"push"](()=>{m=v,l(0,m)})}function G(){S=this.clientWidth,l(1,S)}return[m,S,I,J,q,F,V,C,O,A,a,H,M,te,x,R,le,P,j,D,G,v=>l(5,F=v),()=>l(5,F=-1),()=>l(5,F=-1),()=>x()]}class ya extends Yl{constructor(t){super();Ql(this,t,ga,va,Xl,{},null,[-1,-1])}}export{ya as default};
